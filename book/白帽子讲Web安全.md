# 白帽子讲Web安全 #
吴翰清

[百度博客](http://hi.baidu.com/aullik5)
[新的博客](http://taosay.net/)
[幻影旅团](ph4nt0m.org)

微信公众账号：道哥的黑板报 ID：taosay

专一

格局、视野（大公司）

## 第一篇 世界观安全 ##

安全问题的本质是信任的问题。

经历：前五年，渗透测试技术，缓冲区溢出技术，网络攻击技术等，后五年，Web安全

安全开发框架、安全开发流程，安全技术原理

SDL

安全工程师的核心竞争力在于他对安全理解的深度，以及由此引申的看待安全问题的角度和高度。

Open、Free、Share

- 资产等级划分：互联网安全的核心问题是数据安全
- 威胁分析：STRIDE
- 风险分析：DREAD
- 确认解决方案
	- 能够有效解决问题
	- 用户体验好
	- 高性能
	- 低耦合
	- 易于扩展与升级

Pwn2Own

OWASP
> 开放式Web应用程序安全项目（OWASP，Open Web Application Security Project）是一个组织，它提供有关计算机和互联网应用程序的公正、实际、有成本效益的信息。其目的是协助个人、企业和机构来发现和使用可信赖软件。
> 
> [OWASP中国](http://www.owasp.org.cn/)
> [网易云课堂](http://study.163.com/u/OWASPChina#/center/orgCenterCourse)
> [2013 OWASP Top 10](http://www.owasp.org.cn/owasp-project/2013top10)

OWASP Top 10 - 2013

- A1 - 注入

	注入攻击漏洞，例如SQL，OS以及LDAP注入。这些攻击发生在当不可信的数据作为命令或者查询语句的一部分，被发送给解释器的时候。攻击者发送的恶意数据可以欺骗解释器，以执行计划外的命令或者在未被恰当授权时访问数据。
- A2 - 失效的身份认证和会话管理

	与身份认证和会话管理相关的应用程序功能往往得不到正确的实现，这就导致了攻击者破坏密码、密匙、会话令牌或攻击其它的漏洞去冒充其他和用户的身份。
- A3 - 跨站脚本（XSS）

	当应用程序受到含有不可信的数据，在没有进行适当的验证和转义的情况下，就将它发送给一个网页浏览器，这就会产生跨站脚本攻击（简称XSS）。XSS允许攻击者在受害者的浏览器上执行脚本，从而劫持用户会话、危害网站、或者将用户转向至恶意网站。
- A4 - 不安全的直接对象引用

	当开发人员暴露一个对内部实现对象的引用时，例如，一个文件、目录或者数据库密匙，就会产生一个不安全的直接对象引用。在没有访问控制检测或其他保护时，攻击者会操控这些引用去访问未授权数据。
- A5 - 安全配置错误

	好的安全需要对应用程序、框架、应用程序服务器、web服务器、数据库服务器和平台定义和执行安全配置。由于许多设置的默认值并不是安全的，因此，必须定义、实施和维护这些设置。这包含了对所有的软件保持及时地更新，包括所有应用程序的库文件。
- A6 - 敏感信息泄露

	许多Web应用程序没有正确保护敏感数据，如信用卡、税务ID和身份验证凭据。攻击者可能会窃取或篡改这些弱保护的数据以进行信用卡诈骗、身份窃取、或其他犯罪。敏感数据值需额外的保护，比如在存放或在传输过程中的加密，以及在与浏览器交换时进行特殊的预防措施。
- A7 - 功能级访问控制缺失

	大多数Web应用程序的功能在UI中可见以前，验证功能级别的访问权限。但是，应用程序需要在每个功能被访问时在服务器端执行相同的访问控制检查。如果请求没有被验证，攻击者能够伪造请求以在未经适当授权时访问功能。
- A8 - 跨站请求伪造（CSRF）

	一个跨站请求伪造攻击迫使登录用户的浏览器将伪造的HTTP请求，包括该用户的会话cookie和其他认证信息，发送到一个存在漏洞的Web应用程序。这就允许了攻击者迫使用户浏览器向存在漏洞的应用程序发送请求，而这些请求会被应用程序认为是用户的合法请求。
- A9 - 使用含有已知漏洞的组件

	组件，比如：库文件、框架和其它软件模块，几乎总是以全部的权限运行。如果一个带有漏洞的组件被利用，这种攻击可以造成更为严重的数据丢失或服务器接管。应用程序使用带有已知漏洞的组件会破坏应用程序防御系统，并使一系列可能的攻击和影响成为可能。
- A10 - 未验证的重定向和转发

	Web应用程序经常将用户重定向和转发到其他网页和网站，并且利用不可信的数据去判定目的页面。如果没有得到适当验证，攻击者可以重定向受害用户到钓鱼软件或恶意网站，或者使用转发去访问未授权的页面。
## 第二篇 客户端脚本安全 ##
必备基础：JavaScript、浏览器的工作原理

HTTP请求、前端、Cookie


### 第2章 浏览器安全 ###

### 第3章 跨站脚本攻击（XSS） ###

### 第4章 跨站点请求伪造（CSRF） ###

### 第5章 点击劫持（ClickJacking） ###

### 第6章 HTML5安全 ###
未来的趋势，移动互联网

## 第三篇 服务器端应用安全 ##
服务器：Apache Tomcat、IIS、Nginx、LightHttpd

防火墙：FireEye

PHP、Web框架（Spring MVC）
### 第7章 注入攻击 ###

### 第8章 文件上传漏洞 ###

### 第9章 认证与会话管理 ###

### 第10章 访问控制 ###
OAuth

### 第11章 加密算法与随机数 ###
在加密算法的选择和使用上，有一下最佳实践：

1. 不要使用ECB模式
2. 不要使用流密码（比如RC4）
3. 使用HMAC-SHA1代替MD5（甚至是代替SHA1）
4. 不要使用相同的key做不同的事情
5. salts与IV需要随机产生
6. 不要自己实现加密算法，尽量使用安全专家已经实现好的库
7. 不要依赖系统的保密性

当你不知道该如何选择时，有以下建议：

1. 使用CBC模式的AES256用于加密
2. 使用HMAC-SHA512用于完整性检查
3. 使用带salt的SHA-256或SHA-512用于Hashing

### 第12章 Web框架安全 ###
实施安全方案，要达到好的效果，必须要完成两个目标：

1. 安全方案正确、可靠
2. 能够发现所有可能存在的安全问题，不出现遗漏

只有深入理解漏洞原理之后，才能设计出真正有效、能够解决问题的方案。

### 第13章 应用层拒绝服务攻击 ###
DDOS，分布式拒绝服务，Distributed Denial of Service。

### 第14章 PHP安全 ###

### 第15章 Web Server配置安全 ###

## 第四篇 互联网公司安全运营 ##
### 第16章 互联网业务安全 ###

### 第17章 安全开发流程（SDL） ###

### 第18章 安全运营 ###
